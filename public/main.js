import{j as C,r as s,u as P,L as x,B as T,R as U,a as S,b as O,c as R}from"./chunks/vendor.js";const e=C.exports.jsx,n=C.exports.jsxs,L=C.exports.Fragment;function E(t){return e("div",{className:`card ${t.className}`,children:t.children})}function A(){return n(E,{className:"home-container",children:[e("h1",{children:"Duit"}),e("h3",{children:"Track your job applications easily"})]})}function f(t){return n("div",{className:`formfield ${t.size?t.size:""}`,children:[e("label",{htmlFor:t.name,children:t.label}),e("input",{id:t.name,type:t.type,onChange:i=>t.onValueChange(i.target.value)})]})}function N(t){return e("button",{className:`formbutton ${t.iconButton?t.iconButton:""}`,onClick:t.onClickHandler,children:t.name})}function B(){const[t,i]=s.exports.useState([]),[u,d]=s.exports.useState(""),[h,m]=s.exports.useState(""),[l,c]=s.exports.useState("");async function w(){let a=await fetch("/api/applications");a=await a.json(),console.log(a),i(a)}async function o(){let a=t,g={company:h,title:l,url:u,status:!1},p=await fetch("/api/application",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(g)});p=await p.json(),a.push(p),i([...a]),d(""),m(""),c("")}async function b(a,g){let p=t,v={};p.forEach(j=>{j._id==a&&(j.status=g,v=j)});let y=await fetch("/api/application",{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(v)});y=await y.json(),console.log(t),i([...p])}async function r(a){let g=[],p={};t.forEach(y=>{y._id==a?p=y:g.push(y)});let v=await fetch("/api/application",{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify(p)});v=await v.json(),console.log(t),i([...g])}return s.exports.useEffect(()=>{w()},[]),n("div",{className:"application-wrapper",children:[n("div",{className:"add-application",children:[e(f,{name:"company",label:"Company",type:"text",size:"small",onValueChange:a=>{m(a)}}),e(f,{name:"title",label:"Title",type:"text",size:"medium",onValueChange:a=>{c(a)}}),e(f,{name:"url",label:"Job Posting URL",type:"text",size:"large",onValueChange:a=>{d(a)}}),e("div",{children:e(N,{iconButton:"add-icon",name:"+",onClickHandler:o})})]}),e("div",{className:"application-list",children:t.map(a=>n("details",{className:"application-card",children:[n("summary",{children:[e("span",{className:a.status?"summary-status applied":"summary-status not-applied",onClick:g=>{g.preventDefault(),b(a._id,!a.status)}}),n("span",{className:"summary-company",children:[e("b",{children:"Company: "}),a.company]}),n("span",{className:"summary-title",children:[e("b",{children:"Title: "})," ",a.title]}),e(N,{iconButton:"trash-icon",name:" ",onClickHandler:()=>{r(a._id)}})]}),n("div",{className:"application-details",children:[n("h3",{children:["Company: ",a.company]}),n("h3",{children:["Title: ",a.title]}),n("h3",{children:["URL: ",a.url]})]})]},a._id))})]})}function H(){return e("main",{children:"Profile"})}function k(t){const[i,u]=s.exports.useState(!1),[d,h]=s.exports.useState(""),[m,l]=s.exports.useState(""),[c,w]=s.exports.useState(""),o=P();s.exports.useEffect(()=>{});async function b(){let r=await fetch("/api/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:m,password:c})});r=await r.json(),console.log(r),u(!r.status),h(r.msg?r.msg:""),setTimeout(()=>{t.setLogin(!0),u(!1),h(""),o("/")},1500)}return n(E,{className:"signup-container",children:[e("h1",{children:"Login"}),i?e("h3",{children:d}):n(L,{children:[e(f,{name:"email",label:"Email",type:"email",onValueChange:r=>{l(r)}}),e(f,{name:"password",label:"Password",type:"password",onValueChange:r=>{w(r)}}),e(N,{name:"Login",onClickHandler:b})]})]})}function I(){const[t,i]=s.exports.useState(!1),[u,d]=s.exports.useState(""),[h,m]=s.exports.useState(""),[l,c]=s.exports.useState("");s.exports.useEffect(()=>{});async function w(){let o=await fetch("/api/signup",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:h,password:l})});o=await o.json(),console.log(o),i(!!o._id),d(o.msg?o.msg:""),setInterval(()=>{i(!1),d("")},5e3)}return n(E,{className:"signup-container",children:[e("h1",{children:"Sign Up"}),t?e("h3",{children:u}):n(L,{children:[e(f,{name:"email",label:"Email",type:"email",onValueChange:o=>{m(o)}}),e(f,{name:"password",label:"Password",type:"password",onValueChange:o=>{c(o)}}),e(N,{name:"Sign Up",onClickHandler:w})]})]})}function M(t){return n("div",{className:"header",children:[e("div",{className:"left",children:"Duit"}),n("nav",{className:"right",children:[e(x,{to:"/",children:e("span",{children:"Home"})}),e(x,{to:"/applications",children:e("span",{children:"Applications"})}),e(x,{to:"/signup",children:e("span",{children:"Sign Up"})}),t.loggedIn?e(x,{to:"",children:e("span",{onClick:t.logout,children:"Logout"})}):e(x,{to:"/login",children:e("span",{children:"Login"})})]})]})}function V(){const[t,i]=s.exports.useState(!1),[u,d]=s.exports.useState(!0);async function h(){let c=await(await fetch("/loggedIn")).json();return d(!1),Promise.resolve(c.status)}async function m(){let c=await(await fetch("/logout")).json();console.log(c.status),window.location.reload()}return s.exports.useEffect(()=>{h().then(l=>{i(l)})},[]),e(L,{children:n(T,{children:[e(M,{loggedIn:t,logout:m}),u?e("main",{}):e("main",{children:n(U,{children:[e(S,{path:"/",element:e(A,{})}),e(S,{path:"/applications",element:t?e(B,{}):e(k,{setLogin:l=>i(l)})}),e(S,{path:"/profile",element:e(H,{})}),e(S,{path:"/login",element:e(k,{setLogin:l=>i(l)})}),e(S,{path:"/signup",element:e(I,{})})]})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js",{scope:"/"})});O.render(e(R.StrictMode,{children:e(V,{})}),document.getElementById("duit-app"));
